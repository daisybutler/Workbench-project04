{% extends "base.html" %}
{% load static %}

{% block content %}
<div id="checkout-order-container" class="container">

    <!--- Order Details --->
    <div class="row">
        <div class="col-12 col-md-8">
            <h1>Order Details</h1>
        </div>
    </div>
    <form id="order-details" action="">
        <div class="row">
            <div class="col-12 col-md-8">
                <hr>
                <div class="row">
                    <div class="col-12">
                        <input class="form-control-lg" type="text" placeholder="{{ order.friendly_name }}"
                            aria-label="{{ order.friendly_name }}" readonly>
                    </div>
                    <div class="col-6">
                        <input class="form-control" type="text" placeholder="Starting: [date]"
                            aria-label="Starting date" readonly>
                    </div>
                    <div class="col-6">
                        <input id="price-field" class="form-control" type="number" value="{{ order.price }}"
                            aria-label="Price" readonly>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-6">
                        <textarea style="overflow: visible;" class="form-control" type="text"
                            placeholder="Includes: {{ order.short_description }}" aria-label="Order description"
                            readonly></textarea>
                    </div>
                    <div id="qty-selection-area" class="col-6">
                        <label for="qty-dropdown">Qty:</label>
                        <select id="qty-dropdown" class="form-select" aria-label="qty">
                            <option selected>1</option>
                            <option value="1">2</option>
                            <option value="2">3</option>
                            <option value="3">4</option>
                        </select>
                    </div>
                </div>
                <hr>
            </div>
    </form>

    <!--- Order Summary Box --->
    <div id="order-summary-box" class="col-12 col-md-4">
        <h3>Order Summary</h3>
        <div class="row">
            <div class="col-6">
                <p><span id="summary-qty">1 </span> x {{ order.friendly_name }}</p>
            </div>
            {% if order.name == 'one-off-plan' %}
            <div class="col-6">
                <p>£<span id="summary-price">{{ order.price }}</span></p>
            </div>
            <div class="col-12">
                <hr>
                <p>Your card will be charged £<span id="summary-price-textarea">{{ order.price }}</span> today as a one
                    off payment.</p>
                <hr>
            </div>
            {% else %}
            <div class="col-6">
                <p>£<span id="summary-price">{{ order.price }}</span>/mo</p>
            </div>
            <div class="col-12">
                <hr>
                <p>Your card will be charged £<span id="summary-price-textarea">{{ order.price }}</span> today and
                    subsequently each month the same amount. You
                    can
                    cancel at any time.</p>
                <hr>
            </div>
            {% endif %}
            <div class="col-12 text-center">
                <a class="button" href="">Next</a>
            </div>
        </div>
    </div>
</div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    $(document).ready(function () {

        // Updates the order summary to match user's changes.
        var qty;
        var price = $("#price-field").val();

        // Updates the order summary qty to match user's qty input.
        $("#qty-dropdown").change(function () {
            qty = $(this).val();
            $("#summary-qty").html(qty);

            // Updates both price displays to match user's qty selection.
            var newPrice = price * qty;
            $("#price-field").val(newPrice);
            $("#summary-price").html(newPrice);
            $("#summary-price-textarea").html(newPrice);

        });
    });
</script>
{% endblock %}